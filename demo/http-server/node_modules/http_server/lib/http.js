#!/usr/bin/env node 
var http = require('http');
var fs = require('fs');
var path = require('path');
var mime = require('mime');

var server = http.createServer(function(req,res){
	var staticPath = process.cwd();
	var url = '';
	if(req.url=='/'){
		url = '/index.html';
	}
	if(fs.existsSync(path.join(staticPath,url))){
		fs.readFile(path.join(staticPath,url),function(error,data){
			if(error){
				res.statusCode = 404;
				res.end('Not Found!');
			}
			res.setHeader('Content-type',mime.lookup(url));
			res.write(data);
			res.end();
		});
	}
});
server.listen(8080,function(){
	console.log(server.address())
	console.log("this server url is : http:localhost"+server.address().port);
})